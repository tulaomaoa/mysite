define(function(require,exports,module){require("/static/lib/layer/1.6.0/layer.min.js"),require("/static/page/course/common/course_collection.js"),require("/static/page/course/common/ajax-right-recommend.js"),require("/static/page/course/learn/main.js");OP_CONFIG.userInfo||($(document).on("shown",function(e){var a;(a=$(e.target)).hasClass("rl-modal")&&(a.find("[data-dismiss]").remove(),$(".modal-backdrop").off("click"))}),"object"==typeof thePlayer&&thePlayer.play(!1),require.async("login_sns",function(a){a.init()}));var _time,isShowWechat=function(){"1"==need_bind_num&&$.ajax({url:"//www.imooc.com/wechat/qrcode",type:"GET",dataType:"json",success:function(a){0==a.result&&($(".js-wechat-code").find("img").attr("src",a.data.qrcode),$(".js-publicnumber-block").show(),$(".js-publicnumber-tipoff").show(),checkCode())}})};isShowWechat();var checkCode=function(){_time=setInterval(function(){$.ajax({type:"post",url:"/wechat/checkbind",dataType:"json",success:function(a){1==a.data&&($(".js-publicnumber-block").hide(),$(".js-publicnumber-tipoff").hide(),clearInterval(_time))}})},5e3)},disCloseQrcodeWehat=function(){$.ajax({url:"//www.imooc.com/wechat/qrcode",type:"post",data:{method:-1},dataType:"json",success:function(a){0==a.result&&($(".js-publicnumber-block").hide(),$(".js-publicnumber-tipoff").hide(),clearInterval(_time))}})};$(document).on("click",".js-bindcode-close",function(){disCloseQrcodeWehat()});var getCourseLearn=function(){$.ajax({type:"GET",url:"/course/ajaxcourselearn",data:{cid:course_id},dataType:"json",success:function(a){0==a.result?1==a.data?$(".js-follow-action").attr({"data-cid":course_id,"data-cmd":"cancle",title:"取消收藏"}).find("i").addClass("icon-star2"):$(".js-follow-action").attr({"data-cid":course_id,"data-cmd":"follow",title:"收藏"}).find("i").addClass("icon-star_outline"):-11==a.result&&$(".js-follow-action").attr({"data-cid":course_id,"data-cmd":"follow",title:"收藏"}).find("i").addClass("icon-star_outline")}})},wenda=function(){$.ajax({type:"GET",url:"/course/ajaxmaxchaptermediaques",data:{mid:pageInfo.mid},dataType:"json",success:function(a){if(0==a.result){var c=a.data;if("undefined"!=typeof c.count&&c.count>0){var h,v,b,_="";v=c.count>1?'<a href="javascript:;" class="change-ques Js-change-ques">换个问题</a>':'<p class="change-ques">&nbsp;</p>';var y=c.list;$(y).each(function(a){h=0==a?"curr":"",_+='<li class="'+h+'">			                            <a href="/qadetail/'+y[a].id+'?lastmedia=1" target="_blank" class="ques-title">			                            	'+y[a].title+"			                            </a>			                        </li>"}),b='<div class="question-tip-layer" id="J_ques_pop">                                    <i href="javascript:;" class="close-ques-layer icon-close" id="J_issue_Close"></i>                                    <div class="ques-hd">                                        <i class="imv2-yuanwen"></i><span>来帮同学解答一个问题</span>                                    </div>                                    <div class="ques-bd">                                        <ul class="ques-group" id="ques-group">                                            '+_+'                                        </ul>                                        <div class="ques-ft">                                            <i class="experience">+30经验</i>                                            <i class="credit">+1积分</i>                                            '+v+'                                            <a href="/qadetail/'+y[0].id+'?lastmedia=1" target="_blank" id="js-to-answer" class="to-answer">去回答</a>                                        </div>                                    </div>                                    <div class="triangle"></div>                                </div>',$("#js-ques-box").append(b)}}}})},recomsColors=new Array,recoms={getData:function(a,c){var h=this;$(a).each(function(v){$.ajax({type:"GET",url:"/course/"+a[v],data:{cid:course_id},dataType:"json",success:function(a){if(0==a.result){var b=a.data;if(b.length)switch(c[v]){case"attentionrecom":h.attentionrecom(b,".js-tag-box");break;case"courserecom":h.courserecom(b,".js-commend-box","推荐课程");break;case"courserelate":h.courserecom(b,".js-related-box","相关课程")}}}})})},selectStyle:function(){var a=["blue","yellow","green","orange","lake-blue"],c=["fs20","fs18","fs16","fs14"],h=["normal","bold"],v=function(a){return index=parseInt(Math.floor(Math.random()*a.length))},b=a[v(a)],_=c[v(c)],y=h[v(h)],g=b+" "+_+" "+y,j={color:b,size:_,weight:y,className:g};return j},changeStyle:function(){var a=this;recomsColors.push(a.selectStyle());var c=recomsColors.length;if(c>4&&(recomsColors.shift(),c=recomsColors.length),c>1){var h=parseInt(c-1);$.each(recomsColors,function(i){return i==h||recomsColors[h].color!=recomsColors[i].color&&recomsColors[h].size!=recomsColors[i].size?void 0:(recomsColors.pop(),a.changeStyle())})}},attentionrecom:function(a,c){var h=this,v="";v+='<div class="box mb40 all-attention-box">                        <h4>热门专题标签</h4>                            <div class="js-all-attention all-attention">',$(a).each(function(i){"undefined"!=typeof a[i].title&&(h.changeStyle(),v+='<a href="'+a[i].url+'" target="_blank" data-id="'+a[i].subject_id+'" class="'+recomsColors[recomsColors.length-1].className+'">'+a[i].title+"</a>")}),$(c).prepend(v)},courseCartColor:function(a){var c,h={blueArr:["CSS3","jquery","sassless","python","mysql","大数据","cloudcomputing","photoshop"],orangeArr:["html","html5","webapp","fetool"],greenArr:["nodejs","vuejs","C","C#","android","mongodb","test"],cyanArr:["bootstrap","Reactjs","C puls puls","Go","ios","Unity 3D","Cocos2d-x","maya"],purpleArr:["javascript","php","linux","premiere","ZBrush"],redArr:["angularjs","java","ruby","Oracle","SQL Server"]};return $.each(h,function(v){$.each(h[v],function(b){a==h[v][b]&&(c=v)})}),"blueArr"==c?"blue":"orangeArr"==c?"orange":"greenArr"==c?"green":"cyanArr"==c?"cyan":"purpleArr"==c?"purple":"redArr"==c?"red":"red"},courserecom:function(a,c,h){var v="";v+='<div class="mb40 recom-course-list-box">                        <h4>'+h+'</h4>                        <ul class="js-recom-course moco-aside-course clearfix">',$(a).each(function(i){var c=a[i];v+="<li>";var h='<div class="aside-course-img">';h+="undefined"!=typeof c.pic&&null!=c.pic?'<img src="'+c.pic+'">':'<img src="//www.imooc.com/courseimg/s/cover015_s.jpg">',v+=h,"实战"==c.course_type?v+='<p class="aside-course-type">'+c.course_type+"</p>":"路径"==c.course_type&&(v+='<p class="aside-course-type">就业班</p>'),v+="</div>",v+='<div class="aside-course-content">';var b='<a href="//www.imooc.com/learn/'+c.id+'" class="aside-course-name" target="_blank">';"实战"==c.course_type?b='<a href="//coding.imooc.com/class/'+c.id+'.html" class="aside-course-name" target="_blank">':"路径"==c.course_type&&(b='<a href="//class.imooc.com/sc/'+c.id+'" class="aside-course-name" target="_blank">'),b+=c.name+"</a>",v+=b,c.show_price_info&&(v+='<p class="aside-course-price">',v+=1==c.show_price_info.is_show_discount_price||2==c.show_price_info.discount_type?'<span class="aside-discount-price">￥'+c.show_price_info.discount_price+"</span>":"<span>￥"+c.show_price_info.price+"</span>",c.show_price_info.discount_type&&2==c.show_price_info.discount_type&&(v+='<span class="aside-discount-intro">学生惠</span>'),v+="</p>",v+='<div class="aside-course-dot">',v+='<i class="imv2-dot_samll"></i>',v+="</div>"),"路径"==c.course_type&&(v+='<p class="aside-course-grade">',v+=c.step+"步骤/"+c.coursecount+"门课",v+="</p>",v+='<div class="aside-course-dot">',v+='<i class="imv2-dot_samll"></i>',v+="</div>"),c.easy_type&&(v+='<p class="aside-course-grade">',v+=c.easy_type,v+="</p>",v+='<div class="aside-course-dot">',v+='<i class="imv2-dot_samll"></i>',v+="</div>"),v+='<p class="aside-course-people">',v+='<i class="imv2-set-sns"></i>',v+="<span>"+c.numbers+"</span>",v+="</p>",v+="</div>",v+="</li>"}),v+="</ul></div>",$(c).append(v)}},learnStatus=function(){$.ajax({type:"post",url:"/course/ajaxusermediasstatus?cid="+course_id,dataType:"json",success:function(a){var c,h=[];if(0==a.result){var v=a.data,b=$(".chapter-list").find("li");$(b).each(function(a){h.push($(b[a]).attr("data-id"))}),$(h).each(function(a,h){var _=b.eq(a);return""==v?void $(_).find("a").append('<i class="imv2-empty"></i>'):void(v[h]?(c=h==pageInfo.mid?'<i class="half">正在学<span class="imv2-history"></span></i>':1==v[h].finished?'<i class="imv2-finish finish"></i>':'<i class="imv2-half half"></i>',v[h]==tplDef.media_id&&$(_).addClass("current"),$(_).find("a").append(c)):$(_).find("a").append('<i class="imv2-empty"></i>'))})}}})},bindEvents=function(){$("#courseSidebar").on("click",function(){return!1}),$(document).on("click",function(a){$(a.target).hasClass("js-comment-btn")||($(".section-list").removeClass("active"),$(".openchapter").removeClass("current"))})},init=function(){wenda(),recoms.getData(["ajaxskillcourse","ajaxcoursenewrecom","ajaxcourserelate"],["attentionrecom","courserecom","courserelate"]),learnStatus(),getCourseLearn(),bindEvents(),0!==$(".course-about-tit span").length&&($(".course-about-tit span").each(function(i){var a=i;$(this).on("click",function(){$(this).hasClass("on")||($(this).parent().find("span.on").removeClass("on"),$(this).addClass("on"),$(".course-about .con-wrap").css("display","none").eq(a).fadeIn())})}),$(".course-about-tit span").eq(0).click())};init(),function(){var chaptername=courseName||$(".section-list h3").text(),html="我正在参加@慕课网 的一门课程【"+chaptername+"】,很不错哦！快来一起学习吧！",imgPic=$("#coursePic img")[0].src,url="";url=course_id?"https://www.imooc.com/view/"+course_id:"https://www.imooc.com"+window.location.pathname,window._bd_share_config={common:{bdUrl:url,bdSnsKey:{tsina:"2254855082"},bdText:html,bdMini:"2",bdMiniList:!1,bdPic:imgPic,bdStyle:"0",bdSize:"16"},share:{}},setTimeout(function(){with(document)0[(getElementsByTagName("head")[0]||body).appendChild(createElement("script")).src="/static/lib/baiduShare/api/js/share.js?v=89860593.js?cdnversion="+~(-new Date/36e5)]},1e3),shareFrame=$(".js-share-statue"),setTimeout(function(){shareFrame.hide()},5e3);var timer,shareEles=$(".bdsharebuttonbox a"),interval=(pageInfo.mid,5e3);shareEles.on("click",function(e){}).mouseenter(function(){shareFrame.show()}).mouseleave(function(){timer&&clearTimeout(timer),timer=setTimeout(function(){shareFrame.hide()},interval)})}()});