define(function(){var a=null,c=-1,h="/index/ajaxsearchbbs",v=0;OP_CONFIG&&"wenda"==OP_CONFIG.module&&"save"==OP_CONFIG.page&&(h="/index/ajaxwendasuggest",v=1);var g=function(g){var _=g;a&&clearTimeout(a),a=setTimeout(function(){$.trim(_.val())?$.ajax({type:"get",url:h,dataType:"json",data:{words:$.trim(_.val())},success:function(a){c=-1;var h=a.data.data,g=[];if($.isArray(h)?g=h:"[object Object]"==Object.prototype.toString.call(h)&&$.each(h,function(a,c){g.push(c)}),g&&0!=g.length){var b="<dt>类似的问题</dt>";if(0!=g.length)for(var i=0;i<g.length;i++){var C=g[i],w=80,O=70;0==v&&(0!=C.finished&&(w=70,O=60),0!=C.last_t_id&&(w=70,O=60),0!=C.finished&&0!=C.last_t_id&&(w=50,O=40));var j=C.title||C.description;j=$("<div/>").text(j).html().replace(/"/g,'"');var k=C.id,y=j.strLen()>w?j.subCHStr(0,O)+"..":j,T=C.answers,F="/wenda/detail/";2==C.type_id&&(F="/qadetail/",k=C.old_ques_id);var G="";0==v&&(0!=C.finished&&(G="已采纳回答"),0!=C.last_t_id&&(G="老师回答"),0!=C.finished&&0!=C.last_t_id&&(G="老师回答 已采纳回答")),j=j.replace(/"/g,""),b+='<dd title="'+j+'"><a  class="questiontitle" target="_blank" href="'+F+k+'">'+y+"<em>"+T+"个回答</em> <i>"+G+"</i></a></dd>"}$(".send-area-result").html(b).css("z-index",99999).show(),_.attr("data-old",_.val())}else $(".send-area-result").hide().html("")}}):$(".send-area-result").hide().html("")},400)},_=function(){var a=$(".send-area-result dd").removeClass("oncurr"),h="";c>-1&&(h=$(a.get(c)).addClass("oncurr").attr("title"))},b=function(){$(document).on({keydown:function(h){switch(a&&clearTimeout(a),h.keyCode){case 13:if(c>-1)return $(".send-area-result dd").eq(c).find("a")[0].click(),!1;var v=$.trim($(this).val());if(!v)return!1;$(".send-area-result").hide().html(""),c=-1;break;case 38:c=c>-1?c-1:$(".send-area-result dd").length-1,_();break;case 40:c=c<$(".send-area-result dd").length-1?c+1:-1,_();break;default:g($(this))}},focus:function(){$.trim($(this).val())&&g($(this))},blur:function(){setTimeout(function(){$(".send-area-result").hide().html("")},200)}},".autocomplete").on({mouseenter:function(){$(this).addClass("oncurr").siblings().removeClass("oncurr"),c=$(this).index()},mouseleave:function(){$(this).removeClass("oncurr"),c=-1}},".send-area-result dd")};b()});